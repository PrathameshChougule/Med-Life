SET SQL_MODE = "NO_AUTO_VALUE_ON_ZERO";
START TRANSACTION;
SET time_zone = "+00:00";

-- Creating tables

CREATE TABLE USER (
    AADHAR_NO DECIMAL(12,0) PRIMARY KEY,
    USERNAME VARCHAR(25) NOT NULL
);

CREATE TABLE DOC (
    DOC_ID VARCHAR(11) PRIMARY KEY,
    DOC_NAME VARCHAR(25) NOT NULL,
    PASSWORDS VARCHAR(20) NOT NULL
);

CREATE TABLE P_DETAILS (
    SNO INT PRIMARY KEY AUTO_INCREMENT,
    AADHAR_NO DECIMAL(12,0) REFERENCES USER(AADHAR_NO) ON DELETE CASCADE,
    AGE INT NOT NULL,
    BLOOD_GRP VARCHAR(5) NOT NULL,
    DOB DATE NOT NULL,
    CONTACT_NO DECIMAL(10,0) NOT NULL,
    ECONTACT_NO DECIMAL(10,0) NOT NULL,
    GENDER VARCHAR(10) NOT NULL
);

CREATE TABLE DIAGNOSE (
    SNO INT PRIMARY KEY AUTO_INCREMENT,
    AADHAR_NO DECIMAL(12,0) REFERENCES USER(AADHAR_NO) ON DELETE CASCADE,
    T_DATE DATE NOT NULL DEFAULT CURRENT_TIMESTAMP,
    APPEAREANCE VARCHAR(20) NOT NULL,
    BP VARCHAR(10) NOT NULL,
    MASS FLOAT(5) NOT NULL,
    TEMP INT NOT NULL,
    PULSE VARCHAR(10) NOT NULL, 
    REMARKS VARCHAR(100) NOT NULL,
    MEDICATION VARCHAR(100) NOT NULL
);

CREATE TABLE MED_HISTORY (
    SNO INT PRIMARY KEY AUTO_INCREMENT,
    AADHAR_NO DECIMAL(12,0) REFERENCES USER(AADHAR_NO) ON DELETE CASCADE,
    S_DATE DATE NOT NULL DEFAULT CURRENT_TIMESTAMP,
    E_DATE DATE DEFAULT NULL DEFAULT CURRENT_TIMESTAMP,
    SYMPTOMS VARCHAR(100) NOT NULL,
    DISEASE VARCHAR(25) NOT NULL,
    MEDICATION VARCHAR(100) REFERENCES DIAGNOSE(MEDICATION) ON DELETE CASCADE,
    DOC_NAME VARCHAR(25) REFERENCES DOC(DOC_NAME) ON DELETE CASCADE,
    STAT VARCHAR(10) NOT NULL
);

CREATE TABLE OTHER_MED (
    SNO INT PRIMARY KEY AUTO_INCREMENT,
    AADHAR_NO DECIMAL(12,0) REFERENCES USER(AADHAR_NO) ON DELETE CASCADE,
    MEDS VARCHAR(100),
    ALLERGIES VARCHAR(50),
    INJURY VARCHAR(50) 
);

-- Inserting tables 

INSERT INTO USER (AADHAR_NO, USERNAME) VALUES 
('945632840305','Shrinath Korajkar'),
('646787204425','Sunanda Korajkar'),
('943208807080','Krishna Korajkar'),
('505911565147','Prathamesh Chougule'),
('697967634778','Seema Chougule');

INSERT INTO DOC (DOC_ID, DOC_NAME, PASSWORDS) VALUES
('BEG9543210','Dr. V Gokak','12345'),
('BEG8225210','Dr. Archana Uppin','password'),
('BEG7848058','Dr. Naveen Angadi','abc123'),
('BEG3495387','Dr. Philip Vaz','qwerty'),
('BEG4546347','Dr. Praveen Kumar','psswd@123');

INSERT INTO P_DETAILS (AADHAR_NO, AGE, BLOOD_GRP, DOB, CONTACT_NO, ECONTACT_NO, GENDER) VALUES
('945632840305','20','B +ve','2001-06-23','7848058034','9341960712','Male'),
('646787204425','40','A +ve','1980-04-24','9164073799','9341960712','Female'),
('943208807080','50','AB +ve','1970-07-07','9341960712','7848058034','Male'),
('505911565147','20','B +ve','2001-07-18','7619153471','9591690590','Male'),
('697967634778','58','O +ve','1963-04-08','9591690590','7619153471','Female');

INSERT INTO DIAGNOSE (AADHAR_NO, T_DATE, APPEAREANCE, BP, MASS, TEMP, PULSE, REMARKS, MEDICATION) VALUES
('945632840305','2022-01-05','Swollen inside mouth','100/60','62','37','78','Improvement','B-complex'),
('945632840305','2021-08-12','skin rashes','100/69','55','92','60','Better than before','dicloxacillin'),
('945632840305','2021-09-25','feelings of sadness','100/70','65','95','65','Recovering','citalopram'),
('945632840305','2022-01-28','muscle pain','100/57','70','99','82','Getting Worse','myoril 4mg'),
('945632840305','2022-02-04','swelling','100/78','50','98','62','Some test tobe done','Aspirin');


INSERT INTO MED_HISTORY (AADHAR_NO, S_DATE, E_DATE, SYMPTOMS, DISEASE, MEDICATION, DOC_NAME, STAT) VALUES
('945632840305','2021-12-05','2021-12-22','Swollen mouth','mouth ulcers','B-complex','Dr. Philip Vaz','Cured'),
('646787204425','2021-09-21','2021-10-25','Blood in Stool','Ulcerative Collotis','Infliximab, mesacol','Dr. V Gokak','Cured'),
('646787204425','2021-03-17','2021-03-22','Swelling in legs','Blood clot','Acitron','Dr. Archana Uppin','Cured'),
('945632840305','2022-04-12','0000-00-00','Swollen mouth','mouth ulcers','B-complex','Dr. Philip Vaz','Active'),
('943208807080','2020-05-01','2020-06-11','Swollen hand due to accident','Crack in hand bone','Calcium, Codiene, Tereperatide','Dr. Naveen Angadi','Cured'),
('945632840305','2019-01-10','2021-02-05','skin rashes','diaberes','dicloxacillin','Dr. Philip Vaz','Cured'),
('945632840305','2020-02-12','2021-02-25','feelings of sadness','depression','citalopram','Dr. Praveen Kumar','Cured'),
('945632840305','2021-04-10','2021-04-22','muscle pain','lupus','myoril 4mg','Dr. V Gokak','Cured'),
('945632840305','2021-10-12','2021-10-20','swelling','yeast infection','Aspirin','Dr. Archana Uppin','Cured'),
('945632840305','2021-02-05','2021-03-11','runny nose','Colds and flu','crocin','Dr. Naveen Angadi','Cured');

INSERT INTO OTHER_MED (AADHAR_NO, MEDS, ALLERGIES, INJURY) VALUES
('945632840305',NULL,'Dust','Fracture in hand'),
('646787204425',NULL,NULL,NULL),
('943208807080','Tenepride(sugar)',NULL,NULL),
('505911565147',NULL,'Dust','Tonsins operation'),
('697967634778','Gabadine 300 mg , Emazen D',NULL,'Slip Disk');
